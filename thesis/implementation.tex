\chapter{Implementation}\label{ch:implementation}

In this chapter, the focus will be on the implementation choices made for the realization of the Layer 7 switch.
We will analyze the programming language, algorithms, data structures, and libraries used to optimize efficiency, modularity, and interaction with the underlying technologies discussed previously. 

\section{Enviroment setup}
From the beginning, our switch was designed to be placed inside a maritime operational technology system, such as a ship, to monitor its internal network.

Since it was not possible to test the software against a physical infrastructure, the creation of a virtual twin seemed the most reasonable choice. In addition, the first step toward legacy compatibility was the ability to run the software on commodity hardware such as a personal computer, which has very limited resources compared to industrial system components.

\subsection{Linux Network-Namespaces}
Linux network-namespaces are a powerful feature that allows users to create isolated network environments within a single host, making them a valuable option for emulation, testing, and development, as they provide a controlled environment in which network configurations can be tested without affecting the host system or other network environments.
Simulations such as the above have core logic that can span multiple, separate environments, making it necessary to be network namespace, or container, aware.

By creating a completely new network stack within a namespace for each system component, the containers can completely isolate the network environments from each other, perfectly simulating an industrial environment where each device is a completely separate entity with its own life cycle. 

%speak about reproducibility of real context via namespaces and why they are good for reproducing real life scenarios at 0 cost
%speak about something peculiar to namespaces and their bond to docker containers
%speak about the automated enviroment creation via makefile
%comment it and explain it line by line
%talk about veths and limitation for xdp but not for af_xdp protomoting the idea that user space is good while kernel is complicated and doesn't have enough expressive power since its expressiveness is determined by maps

\begin{figure}[H]
	\centering
    \includegraphics[scale=0.13]{thesis/images/network_namespaces.png}
	\caption{Visualization of ship simulation using Linux network namespaces}
    \label{fig:network_namespaces}
\end{figure}


\section{The Rust Programming Language}
\section{Project Layout}
\section{Algorithmic choices and Crates}
\section{Implementation's highlights}
